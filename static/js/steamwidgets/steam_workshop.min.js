const t="https://www.steamwidgets.com";class s extends HTMLElement{DESCRIPTION_MAX_LEN=40;storedData={};oldHeader="";connectedCallback(){var t=void 0!==this.attributes.itemid?this.attributes.itemid.value:null,s=void 0!==this.attributes.views?this.attributes.views.value:"Views",e=void 0!==this.attributes.subscriptions?this.attributes.subscriptions.value:"Subscriptions",o=void 0!==this.attributes.favorites?this.attributes.favorites.value:"Favorites",a=void 0!==this.attributes.author?this.attributes.author.value:"By :creator",i=void 0!==this.attributes.viewtext?this.attributes.viewtext.value:"View item",r=void 0!==this.attributes["show-image"]?parseInt(this.attributes["show-image"].value):1,l=void 0!==this.attributes["style-border"]?this.attributes["style-border"].value:null,d=void 0!==this.attributes["style-shadow"]?parseInt(this.attributes["style-shadow"].value):1,n=void 0!==this.attributes["style-color-background"]?this.attributes["style-color-background"].value:null,h=void 0!==this.attributes["style-color-title"]?this.attributes["style-color-title"].value:null,u=void 0!==this.attributes["style-color-description"]?this.attributes["style-color-description"].value:null,v=void 0!==this.attributes["style-color-stats-count"]?this.attributes["style-color-stats-count"].value:null,c=void 0!==this.attributes["style-color-stats-label"]?this.attributes["style-color-stats-label"].value:null;null!==t&&(this.storedData={itemid:t,views:s,subscriptions:e,favorites:o,author:a,viewtext:i,showImage:r,styleBorder:l,styleShadow:d,styleColorBackground:n,styleColorTitle:h,styleColorDescription:u,styleColorStatsCount:v,styleCOlorStatsLabel:c},this.setupWidget(t,s,e,o,a,i,r,l,d,n,h,u,v,c))}setupWidget(s,e,o,a,i,r,l,d,n,h,u,v,c,p){var m=new XMLHttpRequest,w=this;void 0!==w.custom_events&&void 0!==w.custom_events.eventOnInit&&w.dispatchEvent(w.custom_events.eventOnInit),m.onreadystatechange=function(){if(m.readyState==XMLHttpRequest.DONE){let s=JSON.parse(m.responseText);if(!document.getElementById("steamwidgets-workshop-styles")){let s=document.createElement("link");s.id="steamwidgets-workshop-styles",s.rel="stylesheet",s.type="text/css",s.href=t+"/api/resource/query?type=css&module=workshop&version=v1",document.getElementsByTagName("head")[0].appendChild(s)}let y="",b="";null!==d&&("max"===d?(y="",b=""):"small"===d?(y="border-radius: 4px;",b="steam-workshop-preview-small"):"none"===d&&(y="border-radius: unset;",b="steam-workshop-preview-none"));let D="";n||(D+="box-shadow: unset;"),y.length>0&&(D+=y),null!==h&&(D+="background-color: "+h+";");let g=s.data.description;g.length>=w.DESCRIPTION_MAX_LEN&&(g=g.substr(0,w.DESCRIPTION_MAX_LEN-3)+"..."),i=i.replace(":creator",s.data.creator_data.personaname);let f='\n                <div class="steam-workshop" '+(D.length>0?'style="'+D+'"':"")+'>\n                    <div class="steam-workshop-preview '+(b.length>0?b:"")+'" style="background-image: url(\''+s.data.preview_url+"'); "+(l?"":"display: none;")+'"></div>\n                \n                    <div class="steam-workshop-info" '+(l?"":'style="top: 13px; width: 100%;"')+'>\n                        <div class="steam-workshop-info-title" '+(null!==u?'style="color: '+u+';"':"")+">"+s.data.title+'</div>\n                \n                        <div class="steam-workshop-info-description" '+(null!==v?'style="color: '+v+';"':"")+">"+g+'</div>\n                \n                        <div class="steam-workshop-info-stats">\n                            <div class="steam-workshop-info-stats-item">\n                                <div class="steam-workshop-info-stats-item-count" '+(null!==c?'style="color: '+c+';"':"")+">"+w.readableCount(s.data.views)+'</div>\n                                <div class="steam-workshop-info-stats-item-label" '+(null!==p?'style="color: '+p+';"':"")+">"+e+'</div>\n                            </div>\n                \n                            <div class="steam-workshop-info-stats-item">\n                                <div class="steam-workshop-info-stats-item-count" '+(null!==c?'style="color: '+c+';"':"")+">"+w.readableCount(s.data.subscriptions)+'</div>\n                                <div class="steam-workshop-info-stats-item-label" '+(null!==p?'style="color: '+p+';"':"")+">"+o+'</div>\n                            </div>\n                \n                            <div class="steam-workshop-info-stats-item">\n                                <div class="steam-workshop-info-stats-item-count" '+(null!==c?'style="color: '+c+';"':"")+">"+w.readableCount(s.data.favorited)+'</div>\n                                <div class="steam-workshop-info-stats-item-label" '+(null!==p?'style="color: '+p+';"':"")+">"+a+'</div>\n                            </div>\n                        </div>\n                \n                        <div class="steam-workshop-info-footer">\n                            <div class="steam-workshop-info-footer-author"><a href="'+s.data.creator_data.profileurl+'">'+i+'</a></div>\n                \n                            <div class="steam-workshop-info-footer-action">\n                                <a href="https://steamcommunity.com/sharedfiles/filedetails/?id='+s.data.publishedfileid+'">'+r+"</a>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                ";w.innerHTML=f,void 0!==w.custom_events&&void 0!==w.custom_events.eventOnCompleted&&w.dispatchEvent(w.custom_events.eventOnCompleted)}},m.open("GET",t+"/api/query/workshop?itemid="+s,!0),m.send()}updateWidget(){this.setupWidget(this.storedData.itemid,this.storedData.views,this.storedData.subscriptions,this.storedData.favorites,this.storedData.author,this.storedData.viewtext,this.storedData.showImage,this.storedData.styleBorder,this.storedData.styleShadow,this.storedData.styleColorBackground,this.storedData.styleColorTitle,this.storedData.styleColorDescription,this.storedData.styleColorStatsCount,this.storedData.styleColorStatsLabel)}changeLang(t,s,e,o,a){this.storedData.views=t,this.storedData.subscriptions=s,this.storedData.favorites=e,this.storedData.author=o,this.storedData.viewtext=a,this.setupWidget(this.storedData.itemid,this.storedData.views,this.storedData.subscriptions,this.storedData.favorites,this.storedData.author,this.storedData.viewtext,this.storedData.showImage,this.storedData.styleBorder,this.storedData.styleShadow,this.storedData.styleColorBackground,this.storedData.styleColorTitle,this.storedData.styleColorDescription,this.storedData.styleColorStatsCount,this.storedData.styleColorStatsLabel)}setImageVisibility(t){this.storedData.showImage=t,this.setupWidget(this.storedData.itemid,this.storedData.views,this.storedData.subscriptions,this.storedData.favorites,this.storedData.author,this.storedData.viewtext,this.storedData.showImage,this.storedData.styleBorder,this.storedData.styleShadow,this.storedData.styleColorBackground,this.storedData.styleColorTitle,this.storedData.styleColorDescription,this.storedData.styleColorStatsCount,this.storedData.styleColorStatsLabel)}readableCount(t){const s=1e6,e=1e5,o=1e3;return t>=s?Math.round(t/s,1).toString()+"M":t<s&&t>=e||t<e&&t>=1e4||t<1e4&&t>=o?Math.round(t/o,1).toString()+"K":t.toString()}}window.customElements.define("steam-workshop",s);